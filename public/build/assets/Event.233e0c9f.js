import{_ as E}from"./DashboardContent.40bbe9b8.js";import{_ as N}from"./Table.vue_vue_type_script_setup_true_lang.c722fc27.js";import{_ as V,a as q}from"./Table.vue_vue_type_script_setup_true_lang.53d2c24d.js";import{_ as F}from"./Button.vue_vue_type_script_setup_true_lang.865fb264.js";import{_ as A,a as G}from"./Box.vue_vue_type_script_setup_true_lang.23ff5567.js";import{f as L,g as d,h as O,e as a,w as o,o as t,d as v,t as b,b as f,c as x,i as R,a as h,F as S,j as k,k as C}from"./app.b834e386.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./H1.bd5ff1ae.js";const z={class:"text-2xl font-semibold text-gray-900 dark:text-gray-100"},U={key:0,class:"mb-16"},H={class:"mb-16"},ee=L({__name:"Event",props:{courses:{type:Array,required:!0},event:{type:Object,required:!0},user:{type:Object,required:!0}},setup(e){const{courses:g,event:r}=e,p=d(r.registrations),_=d(g),c=d(!1),B=setInterval(async()=>{if(c.value)return;c.value=!0;const l=await fetch("/api/events/"+r.id+"/user-amount",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(l.ok){const s=await l.json();_.value=g.map(i=>{const m=s.find(u=>u.id==i.id);return{...i,users:m.amount}})}c.value=!1},2500);O(()=>{clearInterval(B)});const $=()=>{C.Inertia.visit("/dashboard/admin/event/"+r.id+"/submit")},T=()=>{C.Inertia.visit("/dashboard/admin/event/"+r.id+"/registrations")};return(l,s)=>{const i=A,m=G,u=F,j=V,w=q,I=N,D=E;return t(),a(D,null,{title:o(()=>[v(b(e.event.name),1)]),default:o(()=>[f(m,{class:"mb-16"},{default:o(()=>[(t(!0),x(S,null,R(_.value,n=>(t(),a(i,{course:n},{default:o(()=>{var y;return[h("p",z,b(typeof n.users=="number"?n.users:(y=n.users)==null?void 0:y.length),1)]}),_:2},1032,["course"]))),256))]),_:1}),["group_phase","slot_booking"].includes(e.event.type)?(t(),x("div",U,[f(u,{theme:"danger",onClick:s[0]||(s[0]=n=>$()),class:"text-center text-2xl uppercase"},{default:o(()=>[v(" Event einteilen ")]),_:1})])):k("",!0),h("div",H,[f(u,{onClick:s[1]||(s[1]=n=>T()),class:"text-center text-2xl uppercase"},{default:o(()=>[v(" Registrierungen anzeigen ")]),_:1})]),e.event.type=="group_phase"&&e.event.groups?(t(),a(j,{key:1,courses:e.courses,event:e.event,groups:e.event.groups},null,8,["courses","event","groups"])):e.event.type=="slot_booking"&&e.event.slots?(t(),a(w,{key:2,slots:e.event.slots},null,8,["slots"])):e.event.type=="event_registration"&&p.value?(t(),a(I,{key:3,courses:e.courses,event:e.event,registrations:p.value,user:e.user},null,8,["courses","event","registrations","user"])):k("",!0)]),_:1})}}});export{ee as default};
