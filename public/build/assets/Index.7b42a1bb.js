import{_ as A,a as D}from"./DashboardContent.40bbe9b8.js";import{_ as T}from"./Container.b310b897.js";import{_ as O}from"./Container.vue_vue_type_script_setup_true_lang.760174fd.js";import{f as w,o as i,c as m,a as g,t as v,j as b,n as q,g as x,m as Z,e as k,w as t,p as j,d as u,b as n,i as E,F as G}from"./app.b834e386.js";import{_ as K,a as R}from"./Row.0a450704.js";import{_ as H}from"./Base.a4aae221.js";import{_ as I}from"./Button.vue_vue_type_script_setup_true_lang.865fb264.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./H1.bd5ff1ae.js";const M={class:"flex flex-col gap-2 overflow-hidden rounded-lg bg-white px-4 pb-12 pt-5 text-center shadow dark:bg-gray-800 sm:px-6 sm:pt-6"},z={class:"font-medium text-gray-500 dark:text-gray-400"},J={key:0},P=["src"],X={key:1},Q=w({__name:"Box",props:{user:{type:Object,required:!0}},setup(a){return(c,l)=>{var s;return i(),m("div",M,[g("p",z,v(a.user.firstname)+" "+v(a.user.lastname),1),a.user.avatarUrl?(i(),m("div",J,[g("img",{src:a.user.avatarUrl,class:"mx-auto"},null,8,P)])):b("",!0),(s=a.user.course)!=null&&s.id?(i(),m("div",X,[g("span",{class:q([a.user.course.classes,"rounded-md p-1 text-xs text-white"])},v(a.user.course.abbreviation),3)])):b("",!0)])}}}),ue=w({__name:"Index",props:{users:{type:Array,required:!0}},setup(a){const c=x(null),l=x({query:""}),{users:s}=a,B=Z(()=>l.value.query?s?s.filter(e=>(e==null?void 0:e.firstname.toLowerCase().includes(l.value.query.toLowerCase()))||(e==null?void 0:e.lastname.toLowerCase().includes(l.value.query.toLowerCase()))||(e==null?void 0:e.email.toLowerCase().includes(l.value.query.toLowerCase()))):[]:s),d=x({state:"setup"}),L=e=>{c.value=e},_=e=>{var o;d.value.state=e,e==="stopped"&&(d.value.user_id=(o=c.value)!=null?o:s[Math.floor(Math.random()*s.length)].id),$()},$=async()=>{var o;(await fetch("/dashboard/admin/random-generator",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector("meta[name='csrf-token']"))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify(d.value)})).ok&&d.value.state==="stopped"&&setTimeout(()=>{c.value=null},5e3)};return(e,o)=>{const y=D,p=I,f=K,C=H,h=j("FormKit"),F=R,S=Q,U=O,V=T,N=A;return i(),k(N,null,{title:t(()=>[u("Zufallsgenerator")]),default:t(()=>[n(V,null,{default:t(()=>[n(C,null,{default:t(()=>[n(y,null,{default:t(()=>[u("Aktionen")]),_:1}),n(f,null,{default:t(()=>[n(p,{onClick:o[0]||(o[0]=r=>_("running")),class:"flex-1 text-center"},{default:t(()=>[u(" Zufallsgenerator starten ")]),_:1}),n(p,{onClick:o[1]||(o[1]=r=>_("stopped")),theme:"danger",class:"flex-1 text-center"},{default:t(()=>[u(" Zufallsgenerator stoppen ")]),_:1})]),_:1}),n(f,null,{default:t(()=>[n(p,{onClick:o[2]||(o[2]=r=>_("idle")),theme:"gray",class:"flex-1 text-center"},{default:t(()=>[u(" Zufallsgenerator idle ")]),_:1})]),_:1})]),_:1}),n(C,null,{default:t(()=>[n(y,null,{default:t(()=>[u("DEBUG")]),_:1}),n(h,{type:"form",id:"assign",actions:!1,modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=r=>l.value=r)},{default:t(()=>[n(F,null,{default:t(()=>[n(f,null,{default:t(()=>[n(h,{type:"text",name:"query",label:"Suche"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(U,{cols:3},{default:t(()=>[(i(!0),m(G,null,E(B.value,r=>(i(),k(S,{onClick:W=>L(r.id),user:r,class:q([{"ring-2 ring-fhac-mint":r.id===c.value},"select-none hover:cursor-pointer"])},null,8,["onClick","user","class"]))),256))]),_:1})]),_:1})]),_:1})}}});export{ue as default};
