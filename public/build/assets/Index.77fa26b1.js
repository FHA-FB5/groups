import{_ as A}from"./DashboardContent.40bbe9b8.js";import{f as _,g as f,h as C,o as a,c as s,a as e,j as n,F as T,i as V,n as i,t as o,d as c,b as m,w as y,e as v,_ as B}from"./app.b834e386.js";import{_ as N}from"./DateTimeString.vue_vue_type_script_setup_true_lang.5419d956.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./H1.bd5ff1ae.js";const j={class:"px-4 sm:px-6 lg:px-8"},q={class:"flex flex-col"},z={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},E={class:"inline-block min-w-full py-2 align-middle"},F={class:"shadow-sm ring-1 ring-black ring-opacity-5"},D={class:"min-w-full border-separate",style:{"border-spacing":"0"}},I={class:"bg-gray-50 dark:bg-gray-900"},R=e("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300 sm:pl-6 lg:pl-8"}," Name ",-1),S=e("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"}," Type ",-1),L={key:0,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},O={key:1,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},$=e("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"}," Registrierung ",-1),H=e("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"}," Teilnehmer ",-1),J=e("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 py-3.5 pl-3 pr-4 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300 sm:pr-6 lg:pr-8"},[e("span",{class:"sr-only"},"Anzeigen")],-1),U={class:"bg-white dark:bg-gray-800"},G={key:0,class:"flex"},K={key:1,class:"flex"},M={class:"flex gap-4"},P={class:"sr-only"},Q={class:"sr-only"},W=_({__name:"Table",props:{events:{type:Object,required:!0},user:{type:Object,required:!0}},setup(r){const{events:h}=r,p=f({}),g=f(!1);h.forEach(l=>{var u;p.value[l.id]={amount:((u=l.registrations)==null?void 0:u.length)||0}});const w=setInterval(async()=>{if(g.value)return;g.value=!0;const l=await fetch("/api/events/registrations-amount",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});l.ok&&(await l.json()).forEach(b=>{p.value[b.id]=b}),g.value=!1},5e3);return C(()=>{clearInterval(w)}),(l,u)=>{const b=N,k=B;return a(),s("div",j,[e("div",q,[e("div",z,[e("div",E,[e("div",F,[e("table",D,[e("thead",I,[e("tr",null,[R,S,r.user.permissionsArray.includes("view hidden event details")?(a(),s("th",L," Ber\xFCcksichtigt Verzehr von Alkohol ")):n("",!0),r.user.permissionsArray.includes("view hidden event details")?(a(),s("th",O," Hat Voraussetzungen ")):n("",!0),$,H,J])]),e("tbody",U,[(a(!0),s(T,null,V(r.events,(t,d)=>(a(),s("tr",{key:t.id},[e("td",{class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 dark:text-gray-100 sm:pl-6 lg:pl-8"])},o(t.name),3),e("td",{class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},o(t.type),3),r.user.permissionsArray.includes("view hidden event details")?(a(),s("td",{key:0,class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},o(t.consider_alcohol?"Ja":"Nein"),3)):n("",!0),r.user.permissionsArray.includes("view hidden event details")?(a(),s("td",{key:1,class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},o(t.has_requirements?"Ja":"Nein"),3)):n("",!0),e("td",{class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},[t.registration_from?(a(),s("div",G,[c(" Von:\xA0 "),m(b,{value:t.registration_from,withClockSuffix:!0},null,8,["value"])])):n("",!0),t.registration_to?(a(),s("div",K,[c(" Bis:\xA0 "),m(b,{value:t.registration_to,withClockSuffix:!0},null,8,["value"])])):n("",!0)],2),e("td",{class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},o(p.value[t.id].amount),3),e("td",{class:i([d!==r.events.length-1?"border-b border-gray-200 dark:border-gray-700":"","relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"])},[e("div",M,[m(k,{href:"/dashboard/tutor/event/"+t.id},{default:y(()=>[c(" Anzeigen "),e("span",P,", "+o(t.name),1)]),_:2},1032,["href"]),r.user.permissionsArray.includes("manage events")?(a(),v(k,{key:0,theme:"danger",href:"/dashboard/admin/event/"+t.id},{default:y(()=>[c(" Admin "),e("span",Q,", "+o(t.name),1)]),_:2},1032,["href"])):n("",!0)])],2)]))),128))])])])])])])])}}}),te=_({__name:"Index",props:{events:{type:Array,required:!0},user:{type:Object,required:!0}},setup(r){return(h,p)=>{const g=W,x=A;return a(),v(x,null,{title:y(()=>[c("Hallo "+o(r.user.firstname)+",",1)]),subtitle:y(()=>[c(" hier findest du eine \xDCbersicht \xFCber alle Veranstaltungen. ")]),default:y(()=>[m(g,{events:r.events,user:r.user},null,8,["events","user"])]),_:1})}}});export{te as default};
