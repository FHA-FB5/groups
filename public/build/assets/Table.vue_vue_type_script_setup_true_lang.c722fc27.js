import{_ as A}from"./Button.vue_vue_type_script_setup_true_lang.865fb264.js";import{f as S,g as j,l as E,m as G,o as t,c as a,a as r,j as d,F as i,i as $,n as u,t as s,d as b,e as k,w as m}from"./app.b834e386.js";const N={class:"px-4 sm:px-6 lg:px-8"},V={class:"flex flex-col"},D={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},O={class:"inline-block min-w-full py-2 align-middle"},R={class:"shadow-sm ring-1 ring-black ring-opacity-5"},I={class:"min-w-full border-separate",style:{"border-spacing":"0"}},L={class:"bg-gray-50 dark:bg-gray-900"},W=r("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300 sm:pl-6 lg:pl-8"}," Vorname ",-1),z=r("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"}," Nachname ",-1),J=r("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"}," Studiengang ",-1),K={key:0,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},P={key:1,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},X={key:2,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},Z={key:3,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},H={key:4,scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 px-3 py-3.5 text-left text-sm font-semibold text-gray-900 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300"},M=r("th",{scope:"col",class:"dark:bg-border-gray-700 border-b border-gray-300 bg-gray-50 bg-opacity-75 py-3.5 pl-3 pr-4 backdrop-blur backdrop-filter dark:bg-gray-900 dark:text-gray-300 sm:pr-6 lg:pr-8"},[r("span",{class:"sr-only"},"Ist anwesend")],-1),Q={key:0,class:"bg-white dark:bg-gray-800"},U={key:0},Y={key:1},ee={key:2},te={key:0},re={class:"flex gap-4"},ae={class:"sr-only"},se={class:"sr-only"},oe={class:"sr-only"},le={class:"sr-only"},de={class:"sr-only"},ne={class:"sr-only"},ue=S({__name:"Table",props:{courses:{type:Array,required:!0},event:{type:Object,required:!0},registrations:{type:Array,required:!0},hideGroups:{type:Boolean,default:!1},hideSlots:{type:Boolean,default:!1},user:{type:Object,default:null}},setup(n){const g=n,h=l=>g.courses.find(c=>c.id===l),x=l=>g.event.slots?g.event.slots.find(c=>c.id===l):null,_=l=>g.event.groups?g.event.groups.find(c=>c.id===l):null,o=j(g.registrations);E(g,l=>{o.value=l.registrations});const v=G(()=>o.value.some(l=>l.form_responses)),w=async l=>{const c=await fetch("/api/registrations/"+l+"/toggle-is-present",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(c.ok){const y=await c.json();o.value=o.value.map(e=>(e.id===l&&(e.is_present=y.is_present),e))}},C=async l=>{const c=await fetch("/api/registrations/"+l+"/toggle-fulfils-requirements",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(c.ok){const y=await c.json();o.value=o.value.map(e=>(e.id===l&&(e.fulfils_requirements=y.fulfils_requirements),e))}},q=async l=>{var y;(await fetch("/api/registrations/"+l,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((y=document.querySelector("meta[name='csrf-token']"))==null?void 0:y.getAttribute("content"))||""}})).ok&&(o.value=o.value.filter(e=>e.id!==l))};return(l,c)=>{const y=A;return t(),a("div",N,[r("div",V,[r("div",D,[r("div",O,[r("div",R,[r("table",I,[r("thead",L,[r("tr",null,[W,z,J,!n.hideSlots&&n.event.type=="slot_booking"?(t(),a("th",K," Slot ")):d("",!0),!n.hideGroups&&n.event.type=="group_phase"?(t(),a("th",P," Gruppe ")):d("",!0),n.event.consider_alcohol?(t(),a("th",X," Trinkt Alkohol ")):d("",!0),n.event.type=="slot_booking"?(t(),a("th",Z," Warteschlangenposition ")):d("",!0),v.value?(t(),a("th",H," R\xFCckmeldung ")):d("",!0),M])]),o.value?(t(),a("tbody",Q,[(t(!0),a(i,null,$(o.value,(e,p)=>{var B,F,T;return t(),a(i,{key:e.id},[e.user?(t(),a("tr",{key:0,class:u({"bg-yellow-100 dark:bg-yellow-900":e.queue_position&&e.queue_position>0,"bg-red-100 dark:bg-red-900":e.queue_position&&e.queue_position==-1,"bg-green-100 dark:bg-green-900":e.fulfils_requirements})},[r("td",{class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 dark:text-gray-100 sm:pl-6 lg:pl-8"])},s(e.user.firstname),3),r("td",{class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm font-medium text-gray-900 dark:text-gray-100"])},s(e.user.lastname),3),r("td",{class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},[h(e.user.course_id)?(t(),a(i,{key:0},[b(s((B=h(e.user.course_id))==null?void 0:B.name),1)],64)):d("",!0)],2),!n.hideSlots&&n.event.type=="slot_booking"?(t(),a("td",{key:0,class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},[e.slot_id&&x(e.slot_id)?(t(),a(i,{key:0},[b(s((F=x(e.slot_id))==null?void 0:F.name),1)],64)):d("",!0)],2)):d("",!0),!n.hideGroups&&n.event.type=="group_phase"?(t(),a("td",{key:1,class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},[e.group_id&&_(e.group_id)?(t(),a(i,{key:0},[b(s((T=_(e.group_id))==null?void 0:T.name),1)],64)):d("",!0)],2)):d("",!0),n.event.consider_alcohol?(t(),a("td",{key:2,class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},s(e.drinks_alcohol?"Ja":"Nein"),3)):d("",!0),n.event.type=="slot_booking"?(t(),a("td",{key:3,class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},[e.queue_position&&e.queue_position>0?(t(),a("span",U,s(e.queue_position),1)):e.queue_position&&e.queue_position==-1?(t(),a("span",Y," Wartet auf Zuteilung ")):(t(),a("span",ee,"Angemeldet"))],2)):d("",!0),v.value?(t(),a("td",{key:4,class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","whitespace-nowrap px-3 py-4 text-sm text-gray-500 dark:text-gray-300"])},[e.form_responses?(t(),a("code",te,s(e.form_responses),1)):d("",!0)],2)):d("",!0),r("td",{class:u([p!==o.value.length-1?"border-b border-gray-200 dark:border-gray-700":"","relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"])},[r("div",re,[r("div",null,[e.is_present?(t(),k(y,{key:0,onClick:f=>w(e.id)},{default:m(()=>[r("span",ae,s(e.user.firstname)+" "+s(e.user.lastname),1),b(" ist anwesend ")]),_:2},1032,["onClick"])):(t(),k(y,{key:1,theme:"gray",onClick:f=>w(e.id)},{default:m(()=>[r("span",se,s(e.user.firstname)+" "+s(e.user.lastname),1),b(" ist nicht anwesend ")]),_:2},1032,["onClick"]))]),n.user&&n.user.permissionsArray.includes("view hidden event details")?(t(),a(i,{key:0},[r("div",null,[e.fulfils_requirements?(t(),k(y,{key:0,onClick:f=>C(e.id)},{default:m(()=>[r("span",oe,s(e.user.firstname)+" "+s(e.user.lastname),1),b(" erf\xFCllt die Anforderungen ")]),_:2},1032,["onClick"])):(t(),k(y,{key:1,theme:"gray",onClick:f=>C(e.id)},{default:m(()=>[r("span",le,s(e.user.firstname)+" "+s(e.user.lastname),1),b(" erf\xFCllt nicht die Anforderungen ")]),_:2},1032,["onClick"]))]),r("div",null,[e.fulfils_requirements?(t(),k(y,{key:1,theme:"gray",disabled:!0,onClick:f=>q(e.id)},{default:m(()=>[r("span",ne,s(e.user.firstname)+" "+s(e.user.lastname),1),b(" l\xF6schen ")]),_:2},1032,["onClick"])):(t(),k(y,{key:0,theme:"danger",onClick:f=>q(e.id)},{default:m(()=>[r("span",de,s(e.user.firstname)+" "+s(e.user.lastname),1),b(" l\xF6schen ")]),_:2},1032,["onClick"]))])],64)):d("",!0)])],2)],2)):d("",!0)],64)}),128))])):d("",!0)])])])])])])}}});export{ue as _};
